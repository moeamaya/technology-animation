// Generated by CoffeeScript 1.9.3
(function() {
  var techAnimation;

  $(function() {
    var $container, $doc, $techAnim;
    $techAnim = $('.tech-anim');
    if ($techAnim.length > 0) {
      $doc = $(document);
      window.techAnim = new techAnimation();
      $container = $('.slides');
      return $container.fullpage({
        verticalCentered: false,
        css3: true,
        navigation: true,
        navigationPosition: 'left',
        navigationTooltips: ['', 'Infrastructure', 'Gateway', 'Load Balancing', 'Application', 'Bastion', 'Database', 'Scaling'],
        showActiveTooltip: true,
        keyboardScrolling: false,
        afterLoad: function(anchorLink, index) {
          return techAnim.play[index - 1].call(this);
        },
        onLeave: function(index, nextIndex, direction) {
          var click, ref;
          click = (ref = Math.abs(nextIndex - index) !== 1) != null ? ref : {
            "true": false
          };
          if (click) {
            $('.slides, .fixed-panel, .fixed-console, .network-container').fadeOut(50);
            return techAnim.clickOn[nextIndex - 1].call(this);
          } else if (nextIndex - index === 1) {
            return techAnim.leave[index - 1].call(this);
          } else if (nextIndex - index === -1) {
            console.log('up');
            return techAnim.leaveUp[index - 2].call(this);
          }
        },
        afterRender: function() {
          return $container.css('opacity', 1);
        }
      });
    }
  });

  techAnimation = (function() {
    var clickApp, clickBastion, clickDatabse, clickGateway, clickInfrastructure, clickIntro, clickNetwork, clickReset, clickScaling, createNetwork, finalInfrastructureState, infrastructure, intro, leaveApp, leaveBastion, leaveDatabase, leaveGateway, leaveInfrastructure, leaveIntro, leaveNetwork, leaveScaling, leaveUpApp, leaveUpBastion, leaveUpDatabase, leaveUpGateway, leaveUpInfrastructure, leaveUpNetwork, leaveUpScaling, network, playApp, playBastion, playDatabase, playGateway, playInfrastructure, playIntro, playNetwork, playScaling, scaling, stopInfrastructure, updateInfrastructureState;

    function techAnimation() {}

    network = null;

    intro = {
      played: false
    };

    infrastructure = {
      played: false,
      copyAnim: null,
      circleAnim: null,
      privateAnim: null
    };

    scaling = {
      half2: null
    };

    playIntro = function() {
      animate({
        el: '.console',
        easing: 'easeOutCirc',
        opacity: [0, 1],
        translateY: [1000, 0],
        duration: 1500,
        delay: 100
      });
      if (!intro.played) {
        intro.played = true;
        animate({
          el: '.intro-header',
          easing: 'easeOutCirc',
          opacity: [0, 1],
          duration: 1500,
          delay: 1600
        });
        animate({
          el: '.intro-text',
          easing: 'easeOutQuad',
          opacity: [0, 1],
          duration: 1500,
          delay: 1900
        });
        animate({
          el: '.primary-header',
          easing: 'easeOutQuad',
          opacity: [0, 1],
          duration: 1000,
          delay: 2300
        });
        return setTimeout((function() {
          var $src;
          intro.play = true;
          $src = $('.b1-text');
          return Helpers.typeConsole('aptible apps:create test-app', $src);
        }), 2000);
      }
    };

    playInfrastructure = function() {
      if (infrastructure.played) {
        $('.load-balancer, .app, .bastion, .database').removeClass('faded');
        $('.network-container').addClass('disappear');
        return $('#infrastructure .copy').removeClass('disappear');
      } else {
        $.fn.fullpage.setAllowScrolling(false);
        animate({
          el: '.fixed-panel',
          easing: 'easeOutQuad',
          opacity: [0, 1],
          translateY: [80, 0],
          duration: 300,
          delay: 600
        });
        infrastructure.copyAnim = setTimeout((function() {
          return $('#infrastructure .copy').removeClass('disappear');
        }), 400);
        animate({
          el: '.customer-vpc-dots',
          opacity: [0, 1],
          scaleX: [0.8, 1.0],
          scaleY: [0.8, 1.0],
          duration: 1200,
          delay: 1300
        });
        animate({
          el: '.loading-circle-1',
          opacity: [0, 1],
          scaleX: [0.8, 1.0],
          scaleY: [0.8, 1.0],
          duration: 1200,
          delay: 1400,
          complete: function(obj) {
            return $(obj).addClass('rotate-rev');
          }
        });
        animate({
          el: '.loading-circle-2',
          opacity: [0, 1],
          scaleX: [0.8, 1.0],
          scaleY: [0.8, 1.0],
          duration: 1200,
          delay: 1500,
          complete: function(obj) {
            return $(obj).addClass('rotate');
          }
        });
        animate({
          el: '.loading-text',
          easing: 'easeOutCirc',
          opacity: [0, 1],
          translateY: [10, 0],
          duration: 600,
          delay: 2000
        });
        infrastructure.circleAnim = setTimeout((function() {
          $('.loading-circle-1, .loading-circle-2, .loading-text').fadeOut();
          return $('.customer-vpc-dots, .customer-vpc').addClass('loaded');
        }), 3000);
        setTimeout((function() {
          return $('.aws span.title').css('color', 'rgba(255,255,255,0.1)');
        }), 3600);
        animate({
          el: '.private',
          opacity: [0, 1],
          easing: 'easeOutCirc',
          duration: 400,
          delay: 4000
        });
        infrastructure.privateAnim = setTimeout((function() {
          return $('.private').addClass('loaded');
        }), 4200);
        animate({
          el: '.public span',
          opacity: [0, 1],
          translateY: [10, 0],
          duration: 1000,
          delay: 5400
        });
        animate({
          el: '.private span',
          opacity: [0, 1],
          translateY: [10, 0],
          duration: 1000,
          delay: 5700
        });
        animate({
          el: '.public .left, .public .right',
          easing: 'easeOutCirc',
          opacity: [0, 1],
          duration: 800,
          delay: 6500
        });
        animate({
          el: '.load-balancer, .app, .bastion, .database',
          easing: 'easeOutCirc',
          opacity: [0, 1],
          duration: 1200,
          delay: 7100
        });
        return infrastructure.finalAnim = setTimeout((function() {
          $.fn.fullpage.setAllowScrolling(true);
          return infrastructure.played = true;
        }), 7000);
      }
    };

    playGateway = function() {
      $('.http, .ssh').addClass('faded');
      setTimeout((function() {
        return $('.docker').addClass('faded');
      }), 100);
      $('#gateway .copy').removeClass('disappear');
      if (!network) {
        network = new Network();
        network.generateNetwork();
        return network.generateLines();
      } else {
        return $('.network-container').removeClass('disappear');
      }
    };

    playNetwork = function() {
      $('.http, .load-balancer').removeClass('faded');
      return $('#network .copy').removeClass('disappear');
    };

    playApp = function() {
      $('.app').removeClass('faded');
      return $('#code .copy').removeClass('disappear');
    };

    playBastion = function() {
      $('.ssh, .bastion').removeClass('faded');
      return $('#bastion .copy').removeClass('disappear');
    };

    playDatabase = function() {
      $('.database').removeClass('faded');
      return $('#database .copy').removeClass('disappear');
    };

    playScaling = function() {
      $('.load-balancer, .app, .bastion, .database').removeClass('faded');
      $('#scale .copy').removeClass('disappear');
      return scaling.half2 = setTimeout((function() {
        return network.runHalf2();
      }), 3000);
    };

    leaveIntro = function() {
      animate({
        el: '.console',
        easing: 'easeOutQuad',
        translateY: [0, 50],
        opacity: [1, 0],
        duration: 400
      });
      if (infrastructure.played) {
        return animate({
          el: ".fixed-panel",
          easing: "easeOutQuad",
          opacity: [0, 1],
          duration: 800
        });
      }
    };

    leaveInfrastructure = function() {
      return $('#infrastructure .copy').addClass('disappear');
    };

    leaveGateway = function() {
      $('#gateway .copy').addClass('disappear');
      return network.runHttp();
    };

    leaveNetwork = function() {
      $('#network .copy').addClass('disappear');
      $('.http, .load-balancer').addClass('faded');
      return network.stop();
    };

    leaveApp = function() {
      $('#code .copy').addClass('disappear');
      $('.app').addClass('faded');
      return network.runSSH();
    };

    leaveBastion = function() {
      $('#bastion .copy').addClass('disappear');
      $('.bastion').addClass('faded');
      $('.ssh').addClass('faded');
      return network.stop();
    };

    leaveDatabase = function() {
      $('#database .copy').addClass('disappear');
      return network.runHalf();
    };

    leaveScaling = function() {};

    leaveUpInfrastructure = function() {
      animate({
        el: ".fixed-panel",
        easing: "easeOutQuad",
        opacity: [1, 0],
        duration: 300
      });
      return setTimeout((function() {
        return $('.fixed-console').fadeIn();
      }), 800);
    };

    leaveUpGateway = function() {
      setTimeout((function() {
        return $('#infrastructure .copy').removeClass('disappear');
      }), 500);
      return $('.http, .ssh, .load-balancer, .app, .bastion, .database').removeClass('faded');
    };

    leaveUpNetwork = function() {
      setTimeout((function() {
        return $('#gateway .copy').removeClass('disappear');
      }), 500);
      $('.http, .load-balancer').addClass('faded');
      return network.stop();
    };

    leaveUpApp = function() {
      setTimeout((function() {
        return $('#network .copy').removeClass('disappear');
      }), 500);
      $('.app').addClass('faded');
      return network.runHttp();
    };

    leaveUpBastion = function() {
      setTimeout((function() {
        return $('#code .copy').removeClass('disappear');
      }), 500);
      $('.bastion').addClass('faded');
      $('.ssh').addClass('faded');
      return network.stop();
    };

    leaveUpDatabase = function() {
      setTimeout((function() {
        return $('#bastion .copy').removeClass('disappear');
      }), 500);
      $('.database').addClass('faded');
      return network.runSSH();
    };

    leaveUpScaling = function() {
      setTimeout((function() {
        return $('#database .copy').removeClass('disappear');
      }), 500);
      $('.http, .ssh, .load-balancer, .app, .bastion').addClass('faded');
      return network.stop();
    };

    finalInfrastructureState = function() {
      $('.customer-vpc-dots, .customer-vpc').css({
        transition: 'all 50ms linear',
        opacity: 1
      }).addClass('loaded');
      $('.aws span.title, aws span.title').css('color', 'rgba(255,255,255,0.1)');
      $('.private').css({
        transition: 'all 50ms linear',
        opacity: 1
      }).addClass('loaded');
      $('.public span, .private span').css('opacity', 1);
      $('.public .left, .public .right').css('opacity', 1);
      $('.load-balancer, .app, .bastion, .database').css('opacity', 1).addClass('faded');
      animate({
        el: '.fixed-panel',
        easing: 'easeOutQuad',
        opacity: [0, 1],
        duration: 300,
        delay: 100
      });
      return setTimeout((function() {
        $('.slides, .fixed-panel').fadeIn();
        infrastructure.played = true;
        return createNetwork();
      }), 500);
    };

    updateInfrastructureState = function() {};

    createNetwork = function() {
      if (!network) {
        network = new Network();
        network.generateNetwork();
        return network.generateLines();
      }
    };

    stopInfrastructure = function() {
      animate.stop('.fixed-panel');
      animate.stop('.customer-vpc-dots');
      animate.stop('.loading-circle-1');
      animate.stop('.loading-circle-2');
      animate.stop('.loading-text');
      animate.stop('.private');
      animate.stop('.public span');
      animate.stop('.private span');
      animate.stop('.public .left, .public .right');
      animate.stop('.load-balancer, .app, .bastion, .database');
      $('.fixed-panel, .customer-vpc-dots, .customer-vpc, .private, .public .left, .public .right').attr('style', '');
      clearTimeout(infrastructure.copyAnim);
      clearTimeout(infrastructure.circleAnim);
      clearTimeout(infrastructure.privateAnim);
      return setTimeout((function() {
        $('.loading-circle-1, .loading-circle-2, .loading-text').hide();
        $('.aws span.title').css('color', 'rgba(255,255,255,0.1)');
        $.fn.fullpage.setAllowScrolling(true);
        return infrastructure.played = true;
      }), 500);
    };

    clickReset = function() {
      return $('.copy').addClass('disappear');
    };

    clickIntro = function() {
      clickReset();
      if (!network) {
        return finalInfrastructureState();
      } else {
        clearTimeout(scaling.half2);
        network.stop();
        animate({
          el: ".fixed-panel",
          easing: "easeOutQuad",
          opacity: [1, 0],
          duration: 300
        });
        $('.network-container').addClass('disappear');
        return setTimeout((function() {
          return $('.slides, .fixed-panel, .fixed-console, .network-container').fadeIn();
        }), 1000);
      }
    };

    clickInfrastructure = function() {
      clickReset();
      if (!network) {
        return finalInfrastructureState();
      } else {
        clearTimeout(scaling.half2);
        network.stop();
        animate({
          el: ".fixed-panel",
          easing: "easeOutQuad",
          opacity: [0, 1],
          duration: 50
        });
        $('.network-container').removeClass('disappear');
        $('.load-balancer, .app, .bastion, .database').css('opacity', 1).addClass('faded');
        $('.network-container').addClass('disappear');
        return setTimeout((function() {
          return $('.slides, .fixed-panel, .network-container').fadeIn();
        }), 1000);
      }
    };

    clickGateway = function() {
      clickReset();
      if (!network) {
        return finalInfrastructureState();
      } else {
        clearTimeout(scaling.half2);
        network.stop();
        animate({
          el: ".fixed-panel",
          easing: "easeOutQuad",
          opacity: [0, 1],
          duration: 50
        });
        $('.network-container').removeClass('disappear');
        $('.load-balancer, .app, .bastion, .database').css('opacity', 1).addClass('faded');
        return setTimeout((function() {
          return $('.slides, .fixed-panel, .network-container').fadeIn();
        }), 1000);
      }
    };

    clickNetwork = function() {
      clickReset();
      if (!network) {
        finalInfrastructureState();
        return setTimeout((function() {
          return network.runHttp();
        }), 800);
      } else {
        clearTimeout(scaling.half2);
        network.stop();
        animate({
          el: ".fixed-panel",
          easing: "easeOutQuad",
          opacity: [0, 1],
          duration: 50
        });
        $('.network-container').removeClass('disappear');
        $('.load-balancer, .app, .bastion, .database').css('opacity', 1).addClass('faded');
        return setTimeout((function() {
          $('.slides, .fixed-panel, .network-container').fadeIn();
          return network.runHttp();
        }), 1000);
      }
    };

    clickApp = function() {
      clickReset();
      if (!network) {
        return finalInfrastructureState();
      } else {
        clearTimeout(scaling.half2);
        network.stop();
        animate({
          el: ".fixed-panel",
          easing: "easeOutQuad",
          opacity: [0, 1],
          duration: 50
        });
        $('.network-container').removeClass('disappear');
        $('.load-balancer, .app, .bastion, .database').css('opacity', 1).addClass('faded');
        return setTimeout((function() {
          return $('.slides, .fixed-panel, .network-container').fadeIn();
        }), 1000);
      }
    };

    clickBastion = function() {
      clickReset();
      if (!network) {
        finalInfrastructureState();
        return setTimeout((function() {
          return network.runSSH();
        }), 800);
      } else {
        clearTimeout(scaling.half2);
        network.stop();
        animate({
          el: ".fixed-panel",
          easing: "easeOutQuad",
          opacity: [0, 1],
          duration: 50
        });
        $('.network-container').removeClass('disappear');
        $('.load-balancer, .app, .bastion, .database').css('opacity', 1).addClass('faded');
        return setTimeout((function() {
          $('.slides, .fixed-panel, .network-container').fadeIn();
          return network.runSSH();
        }), 1000);
      }
    };

    clickDatabse = function() {
      stopInfrastructure();
      clickReset();
      if (!network) {
        return setTimeout((function() {
          return finalInfrastructureState();
        }), 100);
      } else {
        clearTimeout(scaling.half2);
        network.stop();
        animate({
          el: ".fixed-panel",
          easing: "easeOutQuad",
          opacity: [0, 1],
          duration: 50
        });
        $('.network-container').removeClass('disappear');
        $('.load-balancer, .app, .bastion, .database').css('opacity', 1).addClass('faded');
        return setTimeout((function() {
          return $('.slides, .fixed-panel, .network-container').fadeIn();
        }), 1000);
      }
    };

    clickScaling = function() {
      clickReset();
      if (!network) {
        return finalInfrastructureState();
      } else {
        network.stop();
        animate({
          el: ".fixed-panel",
          easing: "easeOutQuad",
          opacity: [0, 1],
          duration: 50
        });
        $('.network-container').removeClass('disappear');
        $('.load-balancer, .app, .bastion, .database').css('opacity', 1).addClass('faded');
        return setTimeout((function() {
          $('.slides, .fixed-panel, .network-container').fadeIn();
          return network.runHalf();
        }), 1000);
      }
    };

    techAnimation.prototype.play = [playIntro, playInfrastructure, playGateway, playNetwork, playApp, playBastion, playDatabase, playScaling];

    techAnimation.prototype.leave = [leaveIntro, leaveInfrastructure, leaveGateway, leaveNetwork, leaveApp, leaveBastion, leaveDatabase, leaveScaling];

    techAnimation.prototype.leaveUp = [leaveUpInfrastructure, leaveUpGateway, leaveUpNetwork, leaveUpApp, leaveUpBastion, leaveUpDatabase, leaveUpScaling];

    techAnimation.prototype.clickOn = [clickIntro, clickInfrastructure, clickGateway, clickNetwork, clickApp, clickBastion, clickDatabse, clickScaling];

    return techAnimation;

  })();

}).call(this);
